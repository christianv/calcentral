<div class="cc-widget cc-widget-student-lookup" data-ng-controller="StudentLookupController">
  <div class="cc-widget-title">
    <h2>Student Lookup</h2>
  </div>
  <div class="cc-widget-padding">
    <!-- Navigation -->
    <div class="cc-clearfix-container">
      <ul class="cc-button-group cc-even-3" role="tablist">
        <li data-ng-repeat="selectOption in selectOptions">
          <button class="cc-button"
            data-ng-click="admin.switchSelectedOption(selectOption)"
            data-ng-class="{'cc-button-selected':(admin.currentSelection === selectOption)}"
            aria-selected="{{admin.currentSelection === selectOption}}"
            role="tab"
            data-ng-bind="selectOption">
          </button>
        </li>
      </ul>
    </div>

    <!-- Search Users -->
    <div data-ng-if="admin.currentSelection === 'Search'">
      <form data-ng-submit="admin.lookupUser()">
        <div class="row">
          <label for="cc-widget-student-lookup-search">Enter UID or SID</label>
          <div>
            <input id="cc-widget-student-lookup-search" class="cc-left" data-ng-pattern="api.util.uidPattern" data-ng-model="admin.query" type="number" data-cc-select-on-click-directive />
            <button
              class="cc-button cc-button-blue cc-widget-student-lookup-search-button"
              data-ng-disabled="!admin.query"
            type="submit">Search</button>
          </div>
        </div>

        <div class="row" data-ng-bind="admin.lookupErrorStatus"></div>
        <div data-ng-if="admin.searchedUsers.length" class="row cc-table">
            <table>
              <thead>
                <tr>
                  <th width="32%" scope="col" class="cc-widget-student-lookup-sid">SID</th>
                  <th width="58%" scope="col">Name</th>
                </tr>
              </thead>
              <tbody>
                <tr data-ng-repeat="user in admin.searchedUsers">
                  <td class="cc-widget-student-lookup-sid" data-ng-bind="user.student_id || 'none'"></td>
                  <td><button type="button" class="cc-button-link cc-widget-student-lookup-actas-button" data-ng-bind="admin.titleCaseName(user)" data-ng-click="admin.actAsUser(user)"></button></td>
                  <td>
                    <span>
                      <button type="button" class="cc-widget-student-lookup-star-button" data-ng-click="admin.toggleSaveState(user)">
                        <i data-ng-if="user.saved" class="fa fa-star fa-stack-1x cc-icon-gold"></i>
                        <i class="fa fa-star-o" data-ng-class="{'cc-widget-student-lookup-star-grey': (!user.saved)}"></i>
                      </button>
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
        </div>
      </form>
    </div>

    <!-- Saved Users -->
    <div data-ng-if="admin.currentSelection === 'Saved'" class="cc-widget-student-lookup-tab">
      <div data-ng-if="!admin.storedUsers.saved.length" data-ng-bind="admin.savedUsersError"></div>
      <div data-ng-if="admin.storedUsers.saved.length" class="row cc-table">
        <table>
          <thead>
            <tr>
              <th width="32%" scope="col" class="cc-widget-student-lookup-sid">SID</th>
              <th width="58%" scope="col">Name</th>
            </tr>
          </thead>
          <tbody>
          <tr data-ng-repeat="user in admin.storedUsers.saved | limitTo: showSavedLimit">
            <td class="cc-widget-student-lookup-sid" data-ng-bind="user.student_id || 'none'"></td>
            <td><button type="button" class="cc-button-link cc-widget-student-lookup-actas-button" data-ng-bind="admin.titleCaseName(user)" data-ng-click="admin.actAsUser(user)"></button></td>
            <td>
              <span>
                <button type="button" class="cc-widget-student-lookup-star-button" data-ng-click="admin.deleteSavedUser(user)">
                  <i class="fa fa-star fa-stack-1x cc-icon-gold"></i>
                  <i class="fa fa-star-o"></i>
                </button>
              </span>
            </td>
          </tr>
          </tbody>
        </table>
        <div data-ng-if="admin.storedUsers.saved.length > showUsersLimit" data-cc-show-infinite-directive data-cc-show-infinite-limit="showSavedLimit"></div>
      </div>
    </div>

    <!-- Recent Users -->
    <div data-ng-if="admin.currentSelection === 'Recent'" class="cc-widget-student-lookup-tab">
      <div data-ng-if="!admin.storedUsers.recent.length" data-ng-bind="admin.recentUsersError"></div>
      <div data-ng-if="admin.storedUsers.recent.length" class="row cc-table">
        <table>
          <thead>
            <tr>
              <th width="32%" scope="col" class="cc-widget-student-lookup-sid">SID</th>
              <th width="58%" scope="col">Name</th>
            </tr>
          </thead>
          <tbody>
          <tr data-ng-repeat="user in admin.storedUsers.recent | limitTo: showRecentLimit">
            <td class="cc-widget-student-lookup-sid" data-ng-bind="user.student_id || 'none'"></td>
            <td><button type="button" class="cc-button-link cc-widget-student-lookup-actas-button" data-ng-bind="admin.titleCaseName(user)" data-ng-click="admin.actAsUser(user)"></button></td>
            <td>
              <span>
                <button type="button" class="cc-widget-student-lookup-star-button" data-ng-click="admin.deleteRecentUser(user)">
                  <i class="fa fa-star fa-stack-1x cc-icon-gold"></i>
                  <i class="fa fa-star-o"></i>
                </button>
              </span>
            </td>
          </tr>
          </tbody>
        </table>
        <div data-ng-if="admin.storedUsers.recent.length > showUsersLimit" data-cc-show-infinite-directive data-cc-show-infinite-limit="showRecentLimit"></div>
      </div>
    </div>

  </div>
</div>
